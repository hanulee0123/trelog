# Claude Code ガイド

このプロジェクトでは TypeScript + React で実装します。Claude Code で開発するときは以下を参考にしてください。

## 要件サマリ（現時点の整理）
- 記録機能: 種目ごとに複数セットをまとめて登録できるフォームを用意します（例: ベンチプレス1行に重量・回数のセットリスト）。
- ストレッチ提案: 種目→固定リストのストレッチにマッピングして自動提示します。
- スケジュール/カレンダー: ダッシュボードの進捗表示は当面不要。カレンダーで過去記録・次回予定を管理します。
- 通知: プッシュ通知でストレッチや休養日リマインドを行います（メール配信は優先度低）。
- データ出力: CSV/Excelは低優先。グラフ（重量・回数推移）はあると嬉しいオプション扱い。
- 認証: Google アカウントによるログインのみを提供し、共有・公開機能は不要。
- マルチデバイス: モバイルファーストで設計し、PWA 化を目指します。
- 初期リリースで欲しい追加: トレーニングメニューのテンプレート、インターバルタイマー、フォームチェック動画アップロード。
- バックエンド: 既存なし。モック API から始め、将来のバックエンド実装が無理なく差し替えられる構造にします。

## 実装済み機能（2025-12-10時点）

### ✅ 完了
1. **トレーニング記録フォーム** (`src/features/training/TrainingLogForm.tsx`)
   - 種目名、重量、回数のセット入力
   - テンプレート機能（ベンチプレス、スクワット）
   - インターバル秒数の設定
   - 記録の保存機能とフィードバックメッセージ

2. **データ永続化** (`src/lib/storage.ts`)
   - localStorage による記録の保存・取得・削除
   - UUID による一意な識別
   - ブラウザリロード後も記録が残る

3. **トレーニング履歴** (`src/features/training/TrainingHistory.tsx`)
   - 過去の記録を時系列で表示
   - セット詳細（重量×回数）の表示
   - 個別削除機能
   - 空の状態表示

4. **インターバルタイマー** (`src/features/timer/IntervalTimer.tsx`)
   - カウントダウンタイマー（秒単位）
   - 円形プログレスバー
   - プリセット時間（30/60/90/120秒）とカスタム入力
   - 開始/一時停止/リセット機能
   - 終了時の音声アラート

5. **ストレッチ提案** (`src/features/stretch/StretchSuggestion.tsx`)
   - 種目に応じた推奨ストレッチの表示

6. **デプロイ環境**
   - GitHub: https://github.com/hanulee0123/trelog
   - Vercel: 自動デプロイ設定済み

### 📋 今後の実装予定
- カレンダー機能（記録の日付表示、詳細ビュー）
- グラフ機能（重量・回数の推移）
- 認証機能（Google ログイン）
- プッシュ通知
- PWA対応の強化

## 開発の流れ
- `npm install` 済みを前提に、`npm run dev` で開発サーバーを起動します。
- 型エラーを避けるため、編集後は `npm run lint` を実行してください。
- コンポーネント追加時は Storybook の代わりにページ上で確認します（現状 Storybook は未設定）。
- デプロイは GitHub へのプッシュをトリガーに Vercel がビルド・反映します。

### GitHub / Vercel
- GitHub リポジトリ: https://github.com/hanulee0123/trelog
- リモート設定済み。`git push origin main` で自動デプロイ。
- Vercel ダッシュボードでビルド結果を確認してください。

## コーディング指針
- React は関数コンポーネント + Hooks を使用し、ステート管理は必要最小限に留めます。
- 型はできる限り具体的に定義し、`any` は避けます。
- UI テキスト・ラベルは日本語で記述します。
- フォルダ構成を崩さないよう、`src` 配下にページ (`pages` / `app`), コンポーネント (`components`), 型 (`types`) などを整理してください。

### アーキテクチャ/フォルダ構成メモ
- フィーチャー単位の分割を推奨します（例: `src/features/training`, `src/features/stretch`, `src/features/auth`）。共通 UI は `src/components`, 型共有は `src/types` に配置。
- API アクセスやキャッシュはクライアント側モック（`msw` やローカルの `handlers`）から開始し、後で実 API に差し替えられるよう `src/lib/api` に薄いクライアントを置きます。
- 状態管理は用途に応じて段階的に選択: フォームやローカル UI は `useState`/`useReducer`、データフェッチは React Query 等を後から導入できるように抽象層を薄く保つ。
- PWA 対応と通知: Service Worker/Push 設定は `public`/`src/lib/pwa` にまとめ、環境ごとの差分を `env` で切り替える方針。

## Pull Request / テスト
- 変更前後で `npm test` (設定されている場合)・`npm run lint` を実行して結果を共有してください。
- PR では目的・主要変更点・テスト結果を簡潔にまとめます。

## 役立つスニペット
- API 呼び出しには `fetch` を利用し、レスポンス型を定義してから処理します。
- フォーム取り扱いは `useState` か `react-hook-form` 等の軽量ライブラリを検討してください。

## デプロイ / 運用メモ
- Vercel で簡易デプロイし、GitHub プッシュをデプロイトリガーとします。
- ビルド設定や環境変数は Vercel ダッシュボードで管理し、必要なら `.env.example` にキー名だけ記載してください。
- プレビュー URL や本番 URL を README に追記するかどうかはチームで決めてください。

## 要確認事項（質問）
- Vercel でデプロイする対象ブランチはどれにしますか？`main` 固定か、特定ブランチのみに限定しますか？
- プレビュー環境を有効にしますか？有効にする場合、レビュー手順や承認フローはどうしますか？
- Vercel のビルドコマンド / 出力ディレクトリはデフォルト（`npm run build` / `dist`）で問題ありませんか？
- 環境変数の要否やロール（開発/本番）の分け方に希望はありますか？
- デプロイ完了通知の運用（Slack 連携など）は必要ですか？
